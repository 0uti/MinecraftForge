++++ REJECTED PATCH 2
                                         {
                                             IBlockState iblockstate1 = p_180707_5_.getBlockState(k2, j3, j4);
 
-                                            if (iblockstate1.getBlock() == Blocks.grass)
+                                            if (isTopBlock(p_180707_5_, k2, j3, j4, p_180707_3_, p_180707_4_))
                                             {
                                                 flag = true;
                                             }
 
-                                            if (iblockstate1.getBlock() == Blocks.stone || iblockstate1.getBlock() == Blocks.dirt || iblockstate1.getBlock() == Blocks.grass)
-                                            {
-                                                if (j3 - 1 < 10)
-                                                {
-                                                    p_180707_5_.setBlockState(k2, j3, j4, Blocks.flowing_lava.getDefaultState());
-                                                }
-                                                else
-                                                {
-                                                    p_180707_5_.setBlockState(k2, j3, j4, Blocks.air.getDefaultState());
-
-                                                    if (flag && p_180707_5_.getBlockState(k2, j3 - 1, j4).getBlock() == Blocks.dirt)
-                                                    {
-                                                        p_180707_5_.setBlockState(k2, j3 - 1, j4, this.worldObj.getBiomeGenForCoords(new BlockPos(k2 + p_180707_3_ * 16, 0, j4 + p_180707_4_ * 16)).topBlock);
-                                                    }
-                                                }
-                                            }
+                                            digBlock(p_180707_5_, k2, j3, j4, p_180707_3_, p_180707_4_, flag);
                                         }
                                     }
                                 }
++++ END PATCH
