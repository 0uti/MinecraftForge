--- ../src-base/minecraft/net/minecraft/inventory/ContainerRepair.java
+++ ../src-work/minecraft/net/minecraft/inventory/ContainerRepair.java
@@ -73,6 +73,8 @@
                     playerIn.addExperienceLevel(-ContainerRepair.this.maximumCost);
                 }
 
+                float breakChance = net.minecraftforge.common.ForgeHooks.onAnvilRepair(playerIn, stack, ContainerRepair.this.inputSlots.getStackInSlot(0), ContainerRepair.this.inputSlots.getStackInSlot(1));
+
                 ContainerRepair.this.inputSlots.setInventorySlotContents(0, (ItemStack)null);
 
                 if (ContainerRepair.this.materialCost > 0)
@@ -97,7 +99,7 @@
                 ContainerRepair.this.maximumCost = 0;
                 IBlockState iblockstate = worldIn.getBlockState(blockPosIn);
 
-                if (!playerIn.capabilities.isCreativeMode && !worldIn.isRemote && iblockstate.getBlock() == Blocks.anvil && playerIn.getRNG().nextFloat() < 0.12F)
+                if (!playerIn.capabilities.isCreativeMode && !worldIn.isRemote && iblockstate.getBlock() == Blocks.anvil && playerIn.getRNG().nextFloat() < breakChance)
                 {
                     int l = ((Integer)iblockstate.getValue(BlockAnvil.DAMAGE)).intValue();
                     ++l;
@@ -175,6 +177,7 @@
 
             if (itemstack2 != null)
             {
+                if (!net.minecraftforge.common.ForgeHooks.onAnvilChange(this, itemstack, itemstack2, outputSlot, repairedItemName, i2)) return;
                 flag = itemstack2.getItem() == Items.enchanted_book && Items.enchanted_book.getEnchantments(itemstack2).tagCount() > 0;
 
                 if (itemstack1.isItemStackDamageable() && itemstack1.getItem().getIsRepairable(itemstack, itemstack2))
@@ -267,7 +270,8 @@
                             {
                                 int i4 = ((Integer)iterator.next()).intValue();
 
-                                if (i4 != i5 && !enchantment.canApplyTogether(Enchantment.getEnchantmentById(i4)))
+                                Enchantment e2 = Enchantment.getEnchantmentById(i4);
+                                if (i4 != i5 && !(enchantment.canApplyTogether(e2) && e2.canApplyTogether(enchantment))) //Forge BugFix: Let Both enchantments veto being together
                                 {
                                     flag1 = false;
                                     ++l1;
@@ -318,6 +322,8 @@
                 }
             }
 
+            if (flag && !itemstack1.getItem().isBookEnchantable(itemstack1, itemstack2)) itemstack1 = null;
+
             if (StringUtils.isBlank(this.repairedItemName))
             {
                 if (itemstack.hasDisplayName())
