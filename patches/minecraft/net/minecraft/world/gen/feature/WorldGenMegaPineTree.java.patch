--- ../src-base/minecraft/net/minecraft/world/gen/feature/WorldGenMegaPineTree.java
+++ ../src-work/minecraft/net/minecraft/world/gen/feature/WorldGenMegaPineTree.java
@@ -43,30 +43,24 @@
             {
                 Block block = worldIn.getBlockState(p_180709_3_.up(j)).getBlock();
 
-                if (block.getMaterial() == Material.air || block.getMaterial() == Material.leaves)
+                if (isAirLeaves(worldIn,p_180709_3_.up(j)))
                 {
                     this.func_175903_a(worldIn, p_180709_3_.up(j), this.woodMetadata);
                 }
 
                 if (j < i - 1)
                 {
-                    block = worldIn.getBlockState(p_180709_3_.add(1, j, 0)).getBlock();
-
-                    if (block.getMaterial() == Material.air || block.getMaterial() == Material.leaves)
+                    if (isAirLeaves(worldIn,p_180709_3_.add(1, j, 0)))
                     {
                         this.func_175903_a(worldIn, p_180709_3_.add(1, j, 0), this.woodMetadata);
                     }
 
-                    block = worldIn.getBlockState(p_180709_3_.add(1, j, 1)).getBlock();
-
-                    if (block.getMaterial() == Material.air || block.getMaterial() == Material.leaves)
+                    if (isAirLeaves(worldIn,p_180709_3_.add(1, j, 1)))
                     {
                         this.func_175903_a(worldIn, p_180709_3_.add(1, j, 1), this.woodMetadata);
                     }
 
-                    block = worldIn.getBlockState(p_180709_3_.add(0, j, 1)).getBlock();
-
-                    if (block.getMaterial() == Material.air || block.getMaterial() == Material.leaves)
+                    if (isAirLeaves(worldIn,p_180709_3_.add(0, j, 1)))
                     {
                         this.func_175903_a(worldIn, p_180709_3_.add(0, j, 1), this.woodMetadata);
                     }
@@ -132,16 +126,23 @@
             BlockPos blockpos = p_175934_2_.up(i);
             Block block = worldIn.getBlockState(blockpos).getBlock();
 
-            if (block == Blocks.grass || block == Blocks.dirt)
+            if (block.canSustainPlant(worldIn, blockpos, net.minecraft.util.EnumFacing.UP, ((net.minecraft.block.BlockSapling)Blocks.sapling)))
             {
                 this.func_175903_a(worldIn, blockpos, field_181635_g);
                 break;
             }
 
-            if (block.getMaterial() != Material.air && i < 0)
+            if (!block.isAir(worldIn, blockpos) && i < 0)
             {
                 break;
             }
         }
     }
+
+    //Helper macro
+    private boolean isAirLeaves(World world, BlockPos pos)
+    {
+        net.minecraft.block.Block block = world.getBlockState(pos).getBlock();
+        return block.isAir(world, pos) || block.isLeaves(world, pos);
+    }
 }
